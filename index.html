<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Saidpur Village VR - Margalla Edition</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls@0.4.3/dist/aframe-blink-controls.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.0.0/dist/aframe-extras.controls.min.js"></script>
  <script src="saidpur-village-vr.js" defer></script>
  
  <style>
    body { 
      margin: 0; 
      overflow: hidden; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    }
    
    #ui-overlay { 
      position: fixed; 
      top: 20px; 
      left: 20px; 
      z-index: 1000; 
      background: rgba(0, 0, 0, 0.75); 
      color: white; 
      padding: 18px 24px; 
      border-radius: 12px; 
      border-left: 4px solid #f39c12;
      pointer-events: none;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }
    
    #ui-overlay h2 {
      margin: 0 0 8px 0;
      font-size: 20px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    
    #ui-overlay p {
      margin: 0;
      font-size: 13px;
      opacity: 0.9;
    }
    
    #exit-btn { 
      position: fixed; 
      top: 20px; 
      right: 20px; 
      z-index: 1001; 
      background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
      color: white; 
      border: none; 
      padding: 14px 28px; 
      border-radius: 50px; 
      cursor: pointer; 
      display: none; 
      font-weight: 600;
      font-size: 14px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      box-shadow: 0 4px 20px rgba(231, 76, 60, 0.4);
      transition: all 0.3s ease;
    }
    
    #exit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(231, 76, 60, 0.6);
    }
  </style>
</head>

<body>
  <button id="exit-btn">EXIT 360¬∞ VIEW</button>
  <div id="ui-overlay">
    <h2>üèõÔ∏è Saidpur Village VR</h2>
    <p>Margalla Hills Foothills | WASD to Walk | Approach Golden Sphere</p>
  </div>

  <a-scene 
    renderer="antialias: true; colorManagement: true; physicallyCorrectLights: true;" 
    fog="type: exponential; color: #c9b899; density: 0.015;">
    
    <a-assets>
      <!-- Sky & Environment -->
      <img id="sky-tex" src="https://cdn.polyhaven.com/asset_img/primary/kloofendal_48d_partly_cloudy_puresky.png?height=780" crossorigin="anonymous">
      <img id="hills-tex" src="https://cdn.polyhaven.com/asset_img/primary/aerial_rocks_02.png?height=780" crossorigin="anonymous">
      
      <!-- Ground & Path Textures -->
      <img id="ground-tex" src="https://cdn.polyhaven.com/asset_img/primary/brown_mud_leaves_01.png?height=780" crossorigin="anonymous">
      <img id="cobble-tex" src="https://cdn.polyhaven.com/asset_img/primary/cobblestone_floor_02.png?height=780" crossorigin="anonymous">
      
      <!-- Building Textures -->
      <img id="brick-tex" src="https://cdn.polyhaven.com/asset_img/primary/red_brick_02.png?height=780" crossorigin="anonymous">
      <img id="stone-tex" src="https://cdn.polyhaven.com/asset_img/primary/rock_wall.png?height=780" crossorigin="anonymous">
      <img id="wood-tex" src="https://cdn.polyhaven.com/asset_img/primary/wood_planks_grey.png?height=780" crossorigin="anonymous">
      
      <!-- Decorative Textures -->
      <img id="terracotta-tex" src="https://cdn.polyhaven.com/asset_img/primary/terracotta_02.png?height=780" crossorigin="anonymous">
      <img id="water-tex" src="https://cdn.polyhaven.com/asset_img/primary/water_002.png?height=780" crossorigin="anonymous">
      
      <!-- Video Asset -->
      <video id="vid-360" src="https://ucarecdn.com/fadab25d-0b3a-45f7-8ef5-85318e92a477/" crossorigin="anonymous" playsinline loop="false"></video>
      
      <!-- Audio Assets -->
      <audio id="ambient-village" src="https://cdn.freesound.org/previews/665/665958_10739144-lq.mp3" preload="auto" loop crossorigin="anonymous"></audio>
      <audio id="video-audio" src="https://cdn.freesound.org/previews/456/456966_9497060-lq.mp3" preload="auto" crossorigin="anonymous"></audio>
    </a-assets>

    <!-- LIGHTING SETUP - Golden Hour Atmosphere -->
    <a-entity light="type: ambient; color: #b8a68a; intensity: 0.4;"></a-entity>
    <a-entity light="type: hemisphere; color: #ffeaa7; groundColor: #6c5b3e; intensity: 0.5;"></a-entity>
    <a-entity light="type: directional; color: #ffb347; intensity: 1.2; castShadow: true; shadowCameraVisible: false;" 
              position="-10 20 8" 
              rotation="-45 -30 0"></a-entity>
    <a-entity light="type: directional; color: #87ceeb; intensity: 0.3;" 
              position="10 15 -5"></a-entity>

    <!-- SKY -->
    <a-sky id="main-sky" src="#sky-tex" color="#e8d4b0"></a-sky>

    <!-- VILLAGE AMBIENT SOUND (Spatialized) -->
    <a-entity id="village-audio-entity" 
              position="0 2 -10"
              sound="src: #ambient-village; autoplay: true; loop: true; volume: 0.6; positional: true; refDistance: 5; maxDistance: 50; rolloffFactor: 1;">
    </a-entity>

    <!-- VILLAGE WORLD CONTAINER -->
    <a-entity id="village-world">
      
      <!-- BACKGROUND HILLS (360¬∞ Panorama) -->
      <a-curvedimage 
        src="#hills-tex" 
        height="80" 
        radius="120" 
        theta-length="360" 
        position="0 25 0" 
        material="shader: flat; fog: false; color: #d4c4a8;">
      </a-curvedimage>

      <!-- GROUND PLANE -->
      <a-plane 
        rotation="-90 0 0" 
        width="250" 
        height="250" 
        material="src: #ground-tex; repeat: 50 50; roughness: 0.9;" 
        shadow="receive: true">
      </a-plane>

      <!-- CENTRAL COBBLESTONE PATH -->
      <a-plane 
        rotation="-90 0 0" 
        width="3.5" 
        height="40" 
        position="0 0.02 -10"
        material="src: #cobble-tex; repeat: 3 25; roughness: 0.8;">
      </a-plane>

      <!-- WATER STREAM/DRAIN -->
      <a-entity position="5 0 0">
        <a-plane 
          rotation="-90 0 0" 
          width="1.2" 
          height="35" 
          position="0 0.01 -8"
          material="src: #water-tex; repeat: 1 15; transparent: true; opacity: 0.7; metalness: 0.3; roughness: 0.1;"
          animation="property: material.offset.y; from: 0; to: 1; dur: 8000; loop: true; easing: linear;">
        </a-plane>
        <!-- Water edge stones -->
        <a-box position="-0.7 0.05 -8" width="0.3" height="0.1" depth="35" color="#5a5a5a"></a-box>
        <a-box position="0.7 0.05 -8" width="0.3" height="0.1" depth="35" color="#5a5a5a"></a-box>
      </a-entity>

      <!-- LEFT HOUSE WITH STONE FOUNDATION -->
      <a-entity position="-10 0 -15" rotation="0 20 0">
        <!-- Stone Foundation -->
        <a-box position="0 0.4 0" width="8.5" height="0.8" depth="6.5" 
               material="src: #stone-tex; repeat: 3 2; roughness: 0.9; color: #7a7a7a;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Raised Platform/Porch -->
        <a-box position="0 1.0 2.5" width="8.5" height="0.2" depth="2" 
               material="src: #wood-tex; repeat: 4 1; color: #8b7355;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Main Brick Structure -->
        <a-box position="0 2.8 0" width="8" height="4.8" depth="6" 
               material="src: #brick-tex; repeat: 3 2; color: #c67b5c;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Roof Overhang -->
        <a-box position="0 5.4 0" width="8.4" height="0.3" depth="6.4" 
               material="color: #5a4a3a; roughness: 0.8;"
               shadow="cast: true">
        </a-box>
        
        <!-- Turquoise Windows -->
        <a-plane position="-2.5 2.5 3.01" width="1.2" height="1.6" color="#5dade2" rotation="0 0 0"></a-plane>
        <a-plane position="0 2.5 3.01" width="1.2" height="1.6" color="#5dade2" rotation="0 0 0"></a-plane>
        <a-plane position="2.5 2.5 3.01" width="0.9" height="1.8" color="#5dade2" rotation="0 0 0"></a-plane>
        
        <!-- Door -->
        <a-plane position="2.5 1.5 3.01" width="0.9" height="1.0" color="#7d6e5a" rotation="0 0 0"></a-plane>
      </a-entity>

      <!-- RIGHT HOUSE WITH STONE FOUNDATION -->
      <a-entity position="10 0 -15" rotation="0 -15 0">
        <!-- Stone Foundation -->
        <a-box position="0 0.4 0" width="9" height="0.8" depth="6.5" 
               material="src: #stone-tex; repeat: 3 2; roughness: 0.9; color: #7a7a7a;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Raised Platform -->
        <a-box position="0 1.0 2.8" width="9" height="0.2" depth="2.5" 
               material="src: #wood-tex; repeat: 4 1; color: #8b7355;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Main Structure -->
        <a-box position="0 2.8 0" width="8.5" height="4.8" depth="6" 
               material="src: #brick-tex; repeat: 3 2; color: #c67b5c;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Roof -->
        <a-box position="0 5.4 0" width="8.9" height="0.3" depth="6.4" 
               material="color: #5a4a3a; roughness: 0.8;"
               shadow="cast: true">
        </a-box>
        
        <!-- Turquoise Windows -->
        <a-plane position="-2.8 2.5 3.01" width="1.2" height="1.6" color="#5dade2"></a-plane>
        <a-plane position="0 2.5 3.01" width="1.2" height="1.6" color="#5dade2"></a-plane>
        <a-plane position="2.8 2.5 3.01" width="1.2" height="1.6" color="#5dade2"></a-plane>
      </a-entity>

      <!-- TEMPLE/MOSQUE WITH YELLOW-WHITE STRIPED DOME -->
      <a-entity position="0 0 -35" rotation="0 0 0">
        <!-- Main Building Base -->
        <a-box position="0 0.4 0" width="10" height="0.8" depth="8" 
               material="src: #stone-tex; repeat: 3 2; color: #9a8a7a;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <a-box position="0 3 0" width="9.5" height="5.2" depth="7.5" 
               material="src: #brick-tex; repeat: 3 2; color: #d4a574;"
               shadow="cast: true; receive: true">
        </a-box>
        
        <!-- Dome Base (Drum) -->
        <a-cylinder position="0 6.2 0" radius="3" height="1.2" 
                    material="color: #e8d4b0; roughness: 0.7;"
                    shadow="cast: true">
        </a-cylinder>
        
        <!-- Main Dome with Vertical Stripes -->
        <a-sphere position="0 8 0" radius="2.8" 
                  material="color: #f4d03f; roughness: 0.4; metalness: 0.3;"
                  shadow="cast: true"
                  segments-height="16">
        </a-sphere>
        
        <!-- Stripe effect using multiple thin cylinders -->
        <a-cylinder position="0 8 0" radius="2.81" height="0.3" 
                    material="color: #ffffff; roughness: 0.4;"
                    rotation="0 0 0">
        </a-cylinder>
        <a-cylinder position="0 8.8 0" radius="2.5" height="0.3" 
                    material="color: #ffffff; roughness: 0.4;">
        </a-cylinder>
        <a-cylinder position="0 9.4 0" radius="2.0" height="0.3" 
                    material="color: #ffffff; roughness: 0.4;">
        </a-cylinder>
        
        <!-- Finial (Top Spire) -->
        <a-cone position="0 10.2 0" radius-bottom="0.4" radius-top="0.05" height="1.5" 
                material="color: #d4af37; metalness: 0.8; roughness: 0.2;"
                shadow="cast: true">
        </a-cone>
        <a-sphere position="0 11.1 0" radius="0.2" material="color: #d4af37; metalness: 0.9;"></a-sphere>
        
        <!-- Arched Windows -->
        <a-entity position="0 3 3.76">
          <a-plane position="-3 0 0" width="1.0" height="2.2" color="#5dade2" 
                   geometry="primitive: plane" 
                   material="side: double">
          </a-plane>
          <a-plane position="0 0 0" width="1.0" height="2.2" color="#5dade2" material="side: double"></a-plane>
          <a-plane position="3 0 0" width="1.0" height="2.2" color="#5dade2" material="side: double"></a-plane>
        </a-entity>
      </a-entity>

      <!-- VILLAGE PROPS & ANIMALS -->
      
      <!-- Terracotta Water Pots (Left Side) -->
      <a-entity position="-12 0 -10">
        <a-cylinder position="0 0.5 0" radius="0.4" height="1.0" 
                    material="src: #terracotta-tex; color: #cd5c5c; roughness: 0.8;"
                    shadow="cast: true; receive: true">
        </a-cylinder>
        <a-cylinder position="0.8 0.4 0.3" radius="0.35" height="0.8" 
                    material="src: #terracotta-tex; color: #cd5c5c; roughness: 0.8;"
                    shadow="cast: true; receive: true">
        </a-cylinder>
      </a-entity>

      <!-- Terracotta Pots (Right Side) -->
      <a-entity position="12 0 -12">
        <a-cylinder position="0 0.6 0" radius="0.5" height="1.2" 
                    material="src: #terracotta-tex; color: #cd5c5c; roughness: 0.8;"
                    shadow="cast: true; receive: true">
        </a-cylinder>
      </a-entity>

      <!-- Charpai (Woven Bed) - Left House -->
      <a-entity position="-8 1.1 -12">
        <a-box position="0 0 0" width="2.2" height="0.1" depth="1.4" 
               material="color: #8b7355; roughness: 0.9;"
               shadow="cast: true; receive: true">
        </a-box>
        <a-box position="-1 -0.3 -0.6" width="0.08" height="0.6" depth="0.08" color="#6b5345"></a-box>
        <a-box position="1 -0.3 -0.6" width="0.08" height="0.6" depth="0.08" color="#6b5345"></a-box>
        <a-box position="-1 -0.3 0.6" width="0.08" height="0.6" depth="0.08" color="#6b5345"></a-box>
        <a-box position="1 -0.3 0.6" width="0.08" height="0.6" depth="0.08" color="#6b5345"></a-box>
      </a-entity>

      <!-- Cow (Simple Low-Poly) -->
      <a-entity position="-6 0 -18" rotation="0 45 0">
        <a-box position="0 0.8 0" width="1.2" height="1.0" depth="2.0" 
               material="color: #8b6f47; roughness: 0.9;"
               shadow="cast: true; receive: true">
        </a-box>
        <a-box position="0 0.9 -1.3" width="0.8" height="0.8" depth="0.9" 
               material="color: #8b6f47; roughness: 0.9;"
               shadow="cast: true">
        </a-box>
        <!-- Legs -->
        <a-box position="-0.4 0.25 0.7" width="0.15" height="0.5" depth="0.15" color="#6b5345"></a-box>
        <a-box position="0.4 0.25 0.7" width="0.15" height="0.5" depth="0.15" color="#6b5345"></a-box>
        <a-box position="-0.4 0.25 -0.7" width="0.15" height="0.5" depth="0.15" color="#6b5345"></a-box>
        <a-box position="0.4 0.25 -0.7" width="0.15" height="0.5" depth="0.15" color="#6b5345"></a-box>
      </a-entity>

      <!-- Chicken (Simple Low-Poly) -->
      <a-entity position="3 0 -5" rotation="0 -60 0">
        <a-sphere position="0 0.3 0" radius="0.25" 
                  material="color: #ffffff; roughness: 0.8;"
                  shadow="cast: true; receive: true">
        </a-sphere>
        <a-sphere position="0 0.35 -0.15" radius="0.15" material="color: #ffffff;"></a-sphere>
        <a-cone position="0 0.35 -0.25" radius-bottom="0.05" radius-top="0" height="0.1" 
                rotation="90 0 0" material="color: #ff6b35;">
        </a-cone>
      </a-entity>

      <!-- Another Chicken -->
      <a-entity position="4.5 0 -6" rotation="0 120 0">
        <a-sphere position="0 0.3 0" radius="0.25" 
                  material="color: #d4a574; roughness: 0.8;"
                  shadow="cast: true; receive: true">
        </a-sphere>
        <a-sphere position="0 0.35 -0.15" radius="0.15" material="color: #d4a574;"></a-sphere>
        <a-cone position="0 0.35 -0.25" radius-bottom="0.05" radius-top="0" height="0.1" 
                rotation="90 0 0" material="color: #ff6b35;">
        </a-cone>
      </a-entity>

      <!-- EXPLORE 360 HOTSPOT (Golden Glowing Sphere) with Proximity Detection -->
      <a-entity id="hotspot-container" 
                class="hotspot" 
                position="0 1.6 -8" 
                data-video="vid-360"
                proximity-trigger="distance: 2.0;">
        
        <!-- Glowing Core -->
        <a-sphere id="hotspot-sphere" 
                  radius="0.35" 
                  material="color: #f39c12; emissive: #f39c12; emissiveIntensity: 0.8; metalness: 0.5; roughness: 0.2;"
                  animation="property: scale; to: 1.3 1.3 1.3; dir: alternate; loop: true; dur: 1500; easing: easeInOutQuad"
                  animation__rotation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
        </a-sphere>
        
        <!-- Outer Glow Ring -->
        <a-ring radius-inner="0.4" radius-outer="0.55" 
                material="color: #f39c12; transparent: true; opacity: 0.4; side: double;"
                animation="property: scale; to: 1.4 1.4 1.4; dir: alternate; loop: true; dur: 1500; easing: easeInOutQuad"
                rotation="-90 0 0">
        </a-ring>
        
        <!-- Proximity Detection Zone (Invisible) -->
        <a-sphere id="proximity-zone" 
                  radius="2.0" 
                  material="visible: false; transparent: true; opacity: 0;"
                  class="proximity-trigger">
        </a-sphere>
        
        <!-- Text Label -->
        <a-text value="APPROACH OR CLICK&#10;360¬∞ VIDEO" 
                align="center" 
                position="0 0.9 0" 
                width="6"
                color="#ffffff"
                font="roboto"
                shader="msdf"
                material="opacity: 0.95;">
        </a-text>
      </a-entity>

    </a-entity>

    <!-- DUAL-INPUT CAMERA RIG -->
    <a-entity id="rig" position="0 0 0">
      
      <!-- DESKTOP CAMERA (with WASD and Look Controls) -->
      <a-entity id="desktop-camera" 
                camera 
                look-controls 
                wasd-controls="acceleration: 20;"
                position="0 1.6 0">
        <a-cursor 
          raycaster="objects: .hotspot" 
          material="color: #f39c12; opacity: 0.8;"
          animation__click="property: scale; startEvents: click; from: 0.8 0.8 0.8; to: 1.3 1.3 1.3; dur: 200; easing: easeInOutQuad"
          animation__mouseenter="property: scale; startEvents: mouseenter; to: 1.4 1.4 1.4; dur: 300; easing: easeOutQuad"
          animation__mouseleave="property: scale; startEvents: mouseleave; to: 1 1 1; dur: 300; easing: easeInQuad">
        </a-cursor>
      </a-entity>

      <!-- VR CAMERA (with Hand Tracking and Blink Controls) -->
      <a-entity id="vr-camera" 
                camera 
                look-controls
                position="0 1.6 0"
                visible="false">
      </a-entity>

      <!-- VR HAND CONTROLLERS (Left and Right) -->
      <a-entity id="left-hand" 
                hand-tracking-controls="hand: left;"
                blink-controls="cameraRig: #rig; teleportOrigin: #vr-camera; collisionEntities: .ground;"
                visible="false">
      </a-entity>

      <a-entity id="right-hand" 
                hand-tracking-controls="hand: right;"
                blink-controls="cameraRig: #rig; teleportOrigin: #vr-camera; collisionEntities: .ground;"
                visible="false">
      </a-entity>

    </a-entity>

  </a-scene>
</body>
</html>